generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Result {
  id         Int       @id @default(autoincrement())
  created_at DateTime  @default(now()) @db.Timestamptz(6)
  updated_at DateTime  @updatedAt @db.Timestamptz(6)
  answers    Json
  code       String?
  nickname   String?
  comment    String?

  // FK: Result.code -> Prescription.code (nullable)
  prescription Prescription? @relation(fields: [code], references: [code], onDelete: SetNull)

  @@map("Result") // 실제 DB 테이블명
}

model Prescription {
  id                BigInt   @id @default(autoincrement())
  code              String   @unique
  name              String?
  dear              String?
  letter            String?
  concept           String?
  movie             String?
  challengeConcept  String?
  challengeKeyword  String?
  challengeActivity String?
  maintainConcept   String?
  maintainKeyword   String?
  maintainActivity  String?
  reconcileConcept  String?
  reconcileKeyword  String?
  reconcileActivity String?

  results Result[]

  @@map("Prescription") // 실제 DB 테이블명
}
